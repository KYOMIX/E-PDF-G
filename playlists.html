<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon and App Icons -->
    <link rel="icon" href="https://autopost.free.nf/my-logo-org.png" type="image/png">
    <link rel="apple-touch-icon" href="https://autopost.free.nf/my-logo-org.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://autopost.free.nf/" />
    
    <!-- Preconnect for external domains -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://www.youtube.com">
    <link rel="preconnect" href="https://autopost.free.nf">
    
    <!-- Basic Meta Tags -->
    <meta name="description" content="KYOMIX's ultimate lofi music playlist: 50+ relaxing tracks for studying, working or chilling. Scan QR code to listen now on YouTube.">
    <meta name="keywords" content="lofi music, KYOMIX, YouTube music playlist, relaxing music, chill beats, study music, ambient sounds, music QR code, lofi hip hop, focus music">
    <meta name="author" content="THE KYOMIX">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://autopost.free.nf/">
    <meta property="og:title" content="🎵 KYOMIX Music Playlist | Relaxing Lofi Beats">
    <meta property="og:description" content="50+ relaxing lofi tracks by KYOMIX. Perfect for studying, working or chilling. Scan QR code to listen now on YouTube.">
    <meta property="og:image" content="https://autopost.free.nf/my-logo-org.png">
    <meta property="og:image:alt" content="KYOMIX Lofi Music Playlist QR Code">
    <meta property="og:site_name" content="KYOMIX Music">
    <meta property="og:locale" content="en_US">
    <meta property="og:updated_time" content="2025-08-03T00:00:00+00:00">
    <meta property="og:video" content="https://www.youtube.com/playlist?list=PL9Hb3uiQbRyWZ3h68K6U7CPgHpRtaeg1t">
    <meta property="og:video:type" content="text/html">
    <meta property="og:video:width" content="1280">
    <meta property="og:video:height" content="720">
    
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@_KYOMIX">
    <meta name="twitter:creator" content="@_KYOMIX">
    <meta name="twitter:title" content="🎵 KYOMIX Music Playlist | Relaxing Lofi Beats">
    <meta name="twitter:description" content="50+ relaxing lofi tracks by KYOMIX. Perfect for studying, working or chilling. Scan QR code to listen now on YouTube.">
    <meta name="twitter:image" content="https://autopost.free.nf/my-logo-org.png">
    <meta name="twitter:image:alt" content="KYOMIX Lofi Music Playlist QR Code">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#ff6b6b">
    
    <!-- Sitemap -->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
    
    <!-- Page Title -->
    <title>🎵 KYOMIX Lofi Music Playlist | 50+ Relaxing Beats</title>
    
    <!-- Font Awesome for Icons (with integrity hash) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous">
    
    <!-- Structured Data (Schema.org) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "MusicPlaylist",
      "name": "KYOMIX Relaxing Lofi Playlist",
      "description": "A curated playlist of relaxing, chill, and lofi music by KYOMIX.",
      "url": "https://www.youtube.com/playlist?list=PL9Hb3uiQbRyWZ3h68K6U7CPgHpRtaeg1t",
      "creator": {
        "@type": "Person",
        "name": "KYOMIX",
        "url": "https://www.youtube.com/@KYOMIX"
      },
      "numberOfTracks": 50,
      "image": "https://autopost.free.nf/my-logo-org.png",
      "datePublished": "2024-01-01",
      "potentialAction": {
        "@type": "ListenAction",
        "target": "https://www.youtube.com/playlist?list=PL9Hb3uiQbRyWZ3h68K6U7CPgHpRtaeg1t"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://autopost.free.nf/"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "Music Playlists",
        "item": "https://autopost.free.nf/playlists/"
      },{
        "@type": "ListItem",
        "position": 3,
        "name": "Lofi Relaxation Playlist"
      }]
    }
    </script>

    <!-- Inline Styles -->
    <style>
        /* CSS Variables for theming */
        :root {
            --primary: #ff6b6b;
            --secondary: #4ecdc4;
            --text: #2d3436;
            --bg: #f9f9f9;
            --card-bg: rgba(255, 255, 255, 0.85);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --border: 1px solid rgba(255, 255, 255, 0.3);
            --success: #4CAF50;
            --error: #F44336;
        }
        .dark-mode {
            --primary: #ff8787;
            --secondary: #63e6e2;
            --text: #f8f9fa;
            --bg: #121212;
            --card-bg: rgba(30, 30, 30, 0.85);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --border: 1px solid rgba(255, 255, 255, 0.1);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.5s ease, color 0.3s ease;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            overflow-x: hidden;
        }
        /* Skip link styles */
        .skip-link {
            position: absolute;
            left: -9999px;
            top: 0;
            background: var(--primary);
            color: white;
            padding: 10px;
            z-index: 100;
            border-radius: 0 0 4px 4px;
        }
        .skip-link:focus {
            left: 0;
        }
        :focus-visible {
            outline: 2px solid var(--primary);
            outline-offset: 3px;
        }
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        .container {
            width: 90%;
            max-width: 500px;
            background: var(--card-bg);
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: var(--shadow);
            border: var(--border);
            text-align: center;
            position: relative;
            overflow: hidden;
            z-index: 1;
            animation: fadeIn 0.8s ease-out;
            transition: transform 0.5s ease, box-shadow 0.5s ease;
        }
        .container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 0%, rgba(255, 107, 107, 0.05) 30%, rgba(78, 205, 196, 0.05) 70%, transparent 100%);
            transform: rotate(30deg);
            z-index: -1;
            animation: shimmer 8s infinite linear;
        }
        h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            position: relative;
            display: inline-block;
        }
        h1::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
        }
        .description {
            margin-bottom: 1.5rem;
            line-height: 1.6;
            opacity: 0.9;
        }
        .playlist-stats {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .playlist-stats span {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        #qrcode {
            margin: 1.5rem auto;
            padding: 15px;
            background: white;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5), 0 0 30px rgba(78, 205, 196, 0.3), 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        #qrcode:hover {
            transform: scale(1.03);
        }
        .link-container {
            margin-top: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .link {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        .link:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        .link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        .link:hover::before {
            left: 100%;
        }
        .download-link {
            background: transparent;
            color: var(--text);
            border: 2px solid var(--primary);
            box-shadow: none;
            overflow: visible;
        }
        .download-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .download-link::before {
            content: none;
        }
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            z-index: 10;
        }
        .theme-toggle:hover {
            transform: rotate(30deg);
        }
        .music-note {
            position: absolute;
            font-size: 1.2rem;
            opacity: 0.6;
            animation: float 4s infinite ease-in-out;
            pointer-events: none;
        }
        .note-1 { top: 10%; left: 10%; animation-delay: 0s; }
        .note-2 { top: 70%; right: 15%; animation-delay: 1s; }
        .note-3 { bottom: 20%; left: 20%; animation-delay: 2s; }
        /* Toast notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--card-bg);
            color: var(--text);
            padding: 12px 24px;
            border-radius: 50px;
            box-shadow: var(--shadow);
            z-index: 1000;
            animation: slideUp 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .toast.success {
            border-left: 4px solid var(--success);
        }
        .toast.error {
            border-left: 4px solid var(--error);
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes shimmer {
            0% { transform: rotate(30deg) translateX(-20%); }
            100% { transform: rotate(30deg) translateX(20%); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        footer {
            margin-top: 2rem;
            font-size: 0.9rem;
            opacity: 0.7;
            color: var(--text);
        }
        /* Social sharing */
        .social-sharing {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
        }
        @media (max-width: 600px) {
            .container {
                padding: 1.5rem;
                width: 95%;
            }
            h1 {
                font-size: 1.6rem;
            }
            .link {
                padding: 10px 20px;
                font-size: 0.95rem;
            }
            .playlist-stats {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
        /* Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .popup-container {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .popup-overlay.active .popup-container {
            transform: scale(1);
        }
        .popup-close {
            position: absolute;
            top: 20px; right: 20px;
            width: 36px; height: 36px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            color: #ff6b6b;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        .popup-close:hover {
            background: #ff6b6b;
            color: white;
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 4px 15px rgba(255,107,107,0.4);
        }
        .popup-logo {
            width: 140px; height: 140px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .popup-logo img {
            width: 100%; height: 100%;
            object-fit: cover;
        }
        .popup-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: white;
            text-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        .popup-message {
            margin-bottom: 2rem;
            line-height: 1.6;
            color: rgba(255,255,255,0.9);
            padding: 0 1rem;
            font-size: 1.1rem;
        }
        .popup-subscribe-btn {
            display: inline-block;
            padding: 14px 32px;
            background: linear-gradient(45deg, #FF0000, #CC0000);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255,0,0,0.4);
        }
        .popup-subscribe-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255,0,0,0.5);
        }
        .popup-subscribe-btn i {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- Skip to content link -->
    <a href="#main-content" class="skip-link">Skip to content</a>

    <!-- Subscription Popup -->
    <div class="popup-overlay" id="subscribePopup" aria-hidden="true" role="dialog" aria-label="Subscribe to KYOMIX">
        <div class="popup-container">
            <button class="popup-close" id="popupClose" aria-label="Close popup">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
            <div class="popup-logo">
                <img src="https://autopost.free.nf/my-logo-org.png" alt="KYOMIX Logo" width="140" height="140" loading="lazy">
            </div>
            <h2 class="popup-title">KYOMIX</h2>
            <p class="popup-message">Subscribe to my channel for more relaxing music updates!</p>
            <a href="https://www.youtube.com/@KYOMIX?sub_confirmation=1" class="popup-subscribe-btn" target="_blank" rel="noopener">
                <i class="fab fa-youtube" aria-hidden="true"></i> Subscribe Now
            </a>
        </div>
    </div>

    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
        <i class="fas fa-moon" aria-hidden="true"></i>
    </button>

    <!-- Static Music Notes -->
    <i class="fas fa-music music-note note-1" aria-hidden="true"></i>
    <i class="fas fa-headphones music-note note-2" aria-hidden="true"></i>
    <i class="fas fa-play-circle music-note note-3" aria-hidden="true"></i>

    <main id="main-content" role="main">
        <div class="container" role="region" aria-label="Music Playlist QR Code">
            <h1>Your Ultimate Lofi Playlist</h1>
            <p class="description">Immerse yourself in KYOMIX's carefully curated lofi playlist. Perfect for studying, working, or relaxing. Over 50 tracks of soothing beats to enhance your focus and calm your mind.</p>
            
            <div class="playlist-stats">
                <span><i class="fas fa-music"></i> 50+ tracks</span>
                <span><i class="fas fa-clock"></i> 3+ hours</span>
            </div>
            
            <div id="qrcode" aria-label="QR Code linking to YouTube playlist"></div>
            
            <div class="link-container">
                <a href="https://www.youtube.com/playlist?list=PL9Hb3uiQbRyWZ3h68K6U7CPgHpRtaeg1t" class="link" target="_blank" rel="noopener">
                    <i class="fab fa-youtube" aria-hidden="true"></i> Open Playlist on YouTube
                </a>
                <a href="https://www.youtube.com/@KYOMIX?sub_confirmation=1" class="link" target="_blank" rel="noopener">
                    <i class="fas fa-user-plus" aria-hidden="true"></i> Subscribe to my channel
                </a>
                <a href="#" id="downloadBtn" class="link download-link">
                    <i class="fas fa-download" aria-hidden="true"></i> Download QR Code
                </a>
                <a href="#" id="copyLinkBtn" class="link">
                    <i class="fas fa-link" aria-hidden="true"></i> Copy Playlist Link
                </a>
                <a href="#" id="shareBtn" class="link">
                    <i class="fas fa-share-alt" aria-hidden="true"></i> Share Playlist
                </a>
            </div>
        </div>
    </main>

    <footer role="contentinfo">
        Made with <i class="fas fa-heart" aria-hidden="true" style="color: var(--primary);"></i> for music lovers
    </footer>

    <!-- QR Code Library (deferred) -->
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js" defer></script>

    <!-- Main Script -->
    <script>
        const playlistUrl = "https://www.youtube.com/playlist?list=PL9Hb3uiQbRyWZ3h68K6U7CPgHpRtaeg1t";

        // QR Code Generation (with fallback)
        function generateQRCode() {
            try {
                new QRCode(document.getElementById("qrcode"), {
                    text: playlistUrl,
                    width: 200,
                    height: 200,
                    colorDark: "#000",
                    colorLight: "#fff",
                    correctLevel: QRCode.CorrectLevel.H
                });
            } catch (e) {
                console.error("QR Code generation failed:", e);
                document.getElementById("qrcode").innerHTML = "<p>QR code could not be loaded.</p>";
            }
        }

        // Theme Toggle with localStorage
        const themeToggle = document.getElementById('themeToggle');
        const icon = themeToggle.querySelector('i');

        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            icon.classList.replace('fa-moon', 'fa-sun');
        }

        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            if (document.body.classList.contains('dark-mode')) {
                icon.classList.replace('fa-moon', 'fa-sun');
                localStorage.setItem('theme', 'dark');
            } else {
                icon.classList.replace('fa-sun', 'fa-moon');
                localStorage.setItem('theme', 'light');
            }
        });

        // Download QR Code
        document.getElementById('downloadBtn').addEventListener('click', function(e) {
            e.preventDefault();
            const canvas = document.querySelector('#qrcode canvas');
            if (canvas) {
                const link = document.createElement('a');
                link.download = 'KYOMIX-Relaxing-Lofi-Playlist-QRCode.png';
                link.href = canvas.toDataURL('image/png');
                link.setAttribute('aria-label', 'Download QR code as PNG');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                showToast('QR Code downloaded successfully!', 'success');
            } else {
                showToast('QR Code not available for download.', 'error');
            }
        });

        // Copy Link
        document.getElementById('copyLinkBtn').addEventListener('click', function(e) {
            e.preventDefault();
            navigator.clipboard.writeText(playlistUrl).then(() => {
                showToast('✅ Playlist link copied to clipboard!', 'success');
            }).catch(err => {
                console.error('Copy failed:', err);
                showToast('❌ Copy failed. Please try again.', 'error');
            });
        });

        // Share Playlist
        document.getElementById('shareBtn').addEventListener('click', async function(e) {
            e.preventDefault();
            try {
                await navigator.share({
                    title: 'KYOMIX Relaxing Lofi Playlist',
                    text: 'Check out this amazing lofi playlist!',
                    url: playlistUrl,
                });
            } catch (err) {
                console.log('Share failed:', err);
                // Fallback to copying the link
                navigator.clipboard.writeText(playlistUrl).then(() => {
                    showToast('Link copied to clipboard!', 'success');
                });
            }
        });

        // Toast notification function
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            // Add icon based on type
            const icon = document.createElement('i');
            icon.className = type === 'success' ? 'fas fa-check-circle' : 'fas fa-exclamation-circle';
            toast.appendChild(icon);
            
            // Add message text
            const text = document.createElement('span');
            text.textContent = message;
            toast.appendChild(text);
            
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // Dynamic Floating Notes
        const notes = ['🎵', '🎶', '🎧', '🎼', '🎤'];
        for (let i = 0; i < 5; i++) {
            const note = document.createElement('div');
            note.className = 'music-note';
            note.style.left = Math.random() * 90 + 5 + '%';
            note.style.top = Math.random() * 90 + 5 + '%';
            note.style.animationDelay = Math.random() * 3 + 's';
            note.textContent = notes[Math.floor(Math.random() * notes.length)];
            document.body.appendChild(note);
        }

        // Background Particles
        class Particle {
            constructor() {
                this.x = Math.random() * window.innerWidth;
                this.y = Math.random() * window.innerHeight;
                this.size = Math.random() * 5 + 1;
                this.speedX = Math.random() * 3 - 1.5;
                this.speedY = Math.random() * 3 - 1.5;
                this.color = `hsl(${Math.random() * 360}, 70%, 70%)`;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.size > 0.2) this.size -= 0.01;
            }
            draw(ctx) {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles() {
            const canvas = document.createElement('canvas');
            canvas.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;pointer-events:none;';
            document.body.appendChild(canvas);
            const ctx = canvas.getContext('2d');
            const particles = Array.from({length: 50}, () => new Particle());

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.update();
                    p.draw(ctx);
                    if (p.size <= 0.2 || p.x < 0 || p.x > canvas.width || p.y < 0 || p.y > canvas.height) {
                        const i = particles.indexOf(p);
                        particles.splice(i, 1);
                        particles.push(new Particle());
                    }
                });
                requestAnimationFrame(animate);
            }

            const resize = () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            };
            resize();
            window.addEventListener('resize', resize);
            animate();
        }

        // Popup: Show on scroll or after 10 seconds
        const subscribePopup = document.getElementById('subscribePopup');
        const popupClose = document.getElementById('popupClose');
        let popupShown = false;

        function showPopup() {
            if (!popupShown) {
                subscribePopup.classList.add('active');
                popupShown = true;
                window.removeEventListener('scroll', showPopup);
            }
        }

        window.addEventListener('scroll', showPopup);
        setTimeout(showPopup, 10000); // Fallback

        popupClose.addEventListener('click', () => {
            subscribePopup.classList.remove('active');
        });
        subscribePopup.addEventListener('click', (e) => {
            if (e.target === subscribePopup) {
                subscribePopup.classList.remove('active');
            }
        });

        // Load QR after page and library are ready
        window.addEventListener('load', () => {
            setTimeout(generateQRCode, 500);
            initParticles();
        });

        // Google Analytics (replace GA_MEASUREMENT_ID with your actual ID)
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    <!-- Google Analytics script -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
</body>
</html>